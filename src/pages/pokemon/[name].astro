---
import Layout from '../../layouts/Layout.astro'
import {getAllPokedex, getPokemonByName} from '../../lib/api'
import {type Result} from '../../types/API-pokedex'

export async function getStaticPaths() {
  const pokedex = await getAllPokedex()
  return pokedex.results.map((pokemon: Result) => ({
    params: {name: pokemon.name},
  }))
}



const name = (Astro.params).name

if (name === undefined) {Astro.redirect('/404')}
const pokemon = await getPokemonByName(name || 'undefined')

---

<Layout title={`Pokemon Web Page | ${pokemon.name[0].toUpperCase()}${pokemon.name.slice(1)}`}>
  <main class="py-1 px-2">
    <article class="border border-black px-1 ">
      <img class=" w-60" src={pokemon.sprites?.front_default} alt=`Pokemon: ${pokemon.name}` loading="lazy">
      <h1>{`${pokemon.name[0].toUpperCase()}${pokemon.name.slice(1)}`}</h1>
    </article>
  </main>
</Layout>
