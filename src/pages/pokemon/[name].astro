---
import Layout from '../../layouts/Layout.astro'
import type { Pokemon } from '../../types/API-pokemon'
import {type Pokedex, type Result} from '../../types/API-pokedex'

export async function getStaticPaths() {
  const res = await fetch(`https://pokeapi.co/api/v2/pokemon?limit=100000&offset=0`)
  const pokedex: Pokedex = await res.json()
  return pokedex.results.map((pokemon: Result) => ({
    params: {name: pokemon.name},
  }))
}



const name = (Astro.params).name

const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${name}`)
const pokemon: Pokemon = await res.json()

---

<Layout title={`Pokemon Web Page | ${pokemon.name[0].toUpperCase()}${pokemon.name.slice(1)}`}>
  <main class="m-auto">
    <article class="border border-black px-1 ">
      <img class=" w-60" src={pokemon.sprites?.front_default} alt=`Pokemon: ${pokemon.name}`>
      <h1>{`${pokemon.name[0].toUpperCase()}${pokemon.name.slice(1)}`}</h1>
    </article>
  </main>
</Layout>
